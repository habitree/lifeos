# 배포 검증 가이드
## LIFE OS - 배포 테스트 및 검증 방법

**작성일**: 2025-01-27

---

## 🔍 현재 배포 상태

### 확인된 상태

- ❌ **빌드 실패**: `Command 'npm run build' exited with 1`
- ❌ **배포 상태**: Error
- ❌ **프로덕션 배포**: 없음
- ⚠️ **빌드 로그**: 46 lines, 3 errors, 1 warning

---

## 📋 배포 검증 체크리스트

### 1. 빌드 상태 확인

#### Vercel 대시보드에서 확인

- [ ] **최신 배포 상태 확인**
  - Vercel 대시보드 > 프로젝트 > Deployments
  - 최신 배포의 상태 확인
  - ✅ 성공 (초록색 체크) 또는 ❌ 실패 (빨간색 X)

- [ ] **빌드 로그 확인**
  - 배포 클릭 > Build Logs 섹션
  - 에러 메시지 확인
  - 에러 개수 확인 (현재: 3 errors, 1 warning)

---

### 2. 환경 변수 확인

#### Vercel 환경 변수

- [ ] **Settings > Environment Variables 확인**
  - [ ] `NEXT_PUBLIC_SUPABASE_URL` 설정 확인
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정 확인
  - [ ] 모든 환경(Production, Preview, Development)에 설정 확인

#### GitHub Secrets (CI용)

- [ ] **GitHub 저장소 > Settings > Secrets 확인**
  - [ ] `NEXT_PUBLIC_SUPABASE_URL` 설정 확인
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정 확인

---

### 3. Supabase 설정 확인

- [ ] **Supabase 프로젝트 활성화**
  - Supabase 대시보드에서 프로젝트 상태 확인
  - 프로젝트가 활성화되어 있는지 확인

- [ ] **스키마 실행 확인**
  - Table Editor에서 테이블 확인:
    - [ ] `users` 테이블
    - [ ] `baselines` 테이블
    - [ ] `daily_logs` 테이블

- [ ] **RLS 정책 확인**
  - Authentication > Policies에서 정책 확인:
    - [ ] `users` 테이블 정책
    - [ ] `baselines` 테이블 정책
    - [ ] `daily_logs` 테이블 정책

---

### 4. 배포 후 기능 테스트

#### 배포 성공 후 확인할 사항

- [ ] **홈페이지 로드**
  - 배포된 URL 접속
  - 페이지가 정상적으로 로드되는지 확인
  - 에러 메시지가 없는지 확인

- [ ] **네비게이션**
  - Sidebar 표시 확인
  - 페이지 간 이동 확인
  - 현재 페이지 하이라이트 확인

- [ ] **Home 페이지 기능**
  - [ ] Phase Indicator 표시 확인
  - [ ] Baseline Card 3개 표시 확인
  - [ ] Baseline 토글 작동 확인
  - [ ] Reset 버튼 작동 확인

- [ ] **Daily Log 페이지 기능**
  - [ ] Daily Log 페이지 접속 확인
  - [ ] DatePicker 작동 확인
  - [ ] 기록 저장 확인
  - [ ] 저장 성공 메시지 확인

- [ ] **Phase 페이지 기능**
  - [ ] Phase 페이지 접속 확인
  - [ ] 현재 Phase 표시 확인
  - [ ] Phase 변경 확인

- [ ] **브라우저 콘솔 확인**
  - [ ] 에러 메시지 없음 확인
  - [ ] Supabase 연결 확인
  - [ ] 네트워크 요청 성공 확인

---

## 🚨 현재 문제 해결

### 빌드 실패 해결

#### 1단계: 빌드 로그 확인

1. Vercel 배포 페이지에서 Build Logs 섹션 확인
2. 에러 메시지 전체 확인
3. 에러 메시지 기록

#### 2단계: 원인 파악

일반적인 원인:
- 환경 변수 누락
- 타입 에러
- 의존성 문제
- Supabase 연결 오류

#### 3단계: 수정

**환경 변수 누락인 경우:**
1. Supabase 키 확인
2. Vercel 환경 변수 추가/수정
3. 재배포

**타입 에러인 경우:**
1. 로컬에서 `npm run build` 실행
2. 에러 수정
3. 코드 푸시 후 재배포

#### 4단계: 재배포

1. Vercel 배포 페이지에서 "Redeploy" 클릭
2. 빌드 진행 상황 확인
3. 빌드 성공 확인

---

## ✅ 성공적인 배포 확인 방법

### 1. 빌드 성공 확인

- ✅ Vercel 배포 페이지에서 "Ready" 또는 "Success" 상태
- ✅ 빌드 로그에 에러 없음
- ✅ 배포 URL 접속 가능

### 2. 사이트 접속 확인

- ✅ 배포된 URL 접속
- ✅ 페이지가 정상적으로 로드됨
- ✅ "Deployment has failed" 메시지 없음

### 3. 기능 테스트

- ✅ 모든 페이지 접속 가능
- ✅ 모든 기능 정상 작동
- ✅ 브라우저 콘솔에 에러 없음

---

## 📝 테스트 시나리오

### 시나리오 1: 기본 기능 테스트

1. 홈페이지 접속
2. Baseline 토글 (수면 ON)
3. Daily Log 페이지로 이동
4. 오늘의 기록 작성 및 저장
5. Phase 페이지로 이동
6. Phase 변경
7. Home 페이지로 돌아가서 변경사항 확인

**예상 결과**: 모든 기능이 정상 작동하고 데이터가 저장됨

---

### 시나리오 2: 데이터 동기화 테스트

1. 로컬에서 데이터 변경
2. 페이지 새로고침
3. 변경사항이 유지되는지 확인
4. Supabase 대시보드에서 데이터 확인

**예상 결과**: 로컬과 Supabase에 데이터가 동기화됨

---

### 시나리오 3: 반응형 테스트

1. 브라우저 개발자 도구 열기
2. 모바일 뷰로 전환 (375px)
3. 레이아웃 확인
4. 태블릿 뷰로 전환 (768px)
5. 레이아웃 확인
6. 데스크톱 뷰로 전환 (1024px)
7. 레이아웃 확인

**예상 결과**: 모든 화면 크기에서 레이아웃이 올바르게 표시됨

---

## 🔧 문제 해결 가이드

### 빌드 실패

**증상**: `Command 'npm run build' exited with 1`

**해결**:
1. 빌드 로그에서 에러 메시지 확인
2. 환경 변수 확인
3. 로컬에서 빌드 테스트
4. 에러 수정 후 재배포

---

### 환경 변수 오류

**증상**: "Missing Supabase environment variables"

**해결**:
1. Vercel 환경 변수 확인
2. 변수 이름 확인 (`NEXT_PUBLIC_` 접두사)
3. 모든 환경에 설정 확인
4. 재배포

---

### Supabase 연결 오류

**증상**: 브라우저 콘솔에 Supabase 연결 에러

**해결**:
1. Supabase 프로젝트 활성화 확인
2. API 키 확인 (anon public 키 사용)
3. RLS 정책 확인
4. 환경 변수 재확인

---

## 📊 검증 결과 기록

### 배포 상태

| 항목 | 상태 | 비고 |
|------|------|------|
| 빌드 상태 | ❌ 실패 | `npm run build` exited with 1 |
| 프로덕션 배포 | ❌ 없음 | 빌드 실패로 인해 배포 안 됨 |
| 환경 변수 | ❓ 확인 필요 | Vercel 대시보드에서 확인 |
| Supabase 연결 | ❓ 확인 필요 | 환경 변수 설정 후 확인 |

---

## ✅ 다음 단계

1. **빌드 로그 확인**
   - Vercel 배포 페이지에서 빌드 로그 전체 확인
   - 에러 메시지 파악

2. **환경 변수 확인**
   - Vercel 환경 변수 설정 확인
   - Supabase 키 확인

3. **문제 해결**
   - 에러 원인에 따라 수정
   - 환경 변수 추가/수정

4. **재배포**
   - 문제 해결 후 재배포
   - 빌드 성공 확인

5. **기능 테스트**
   - 배포 성공 후 각 기능 테스트
   - 전체 시나리오 테스트

---

## 📚 참고 문서

- [배포 테스트 결과](./DEPLOYMENT_TEST_RESULTS.md)
- [배포 오류 수정 가이드](./DEPLOYMENT_ERROR_FIX.md)
- [배포 오류 분석](./DEPLOYMENT_ERROR_ANALYSIS.md)
- [브라우저 테스트 가이드](./BROWSER_TEST.md)

---

> **LIFE OS v0.1**  
> 기준으로 돌아오는 루틴 앱

